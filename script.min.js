const numElements=document.getElementsByClassName("num"),opsElements=document.getElementsByClassName("ops"),equalElement=document.getElementById("equal"),clearElement=document.getElementById("clear"),signElement=document.getElementById("sign"),percentElement=document.getElementById("percent"),prevElement=document.getElementById("prev"),currElement=document.getElementById("curr");class Calculator{constructor(e,t){this.prevElement=e,this.currElement=t,this.clear()}clear(){this.prevOperand="",this.currOperand="0",this.operation=void 0,this.complete=!1}appendNumber(e){if(!0===this.complete&&(this.currOperand="",this.complete=!1),this.currOperand.includes(".")){if(10===this.currOperand.length)return;if("."===e)return}else if(9===this.currOperand.length)return;"0"===this.currElement.innerText?this.currOperand=e.toString():this.currOperand=this.currOperand.toString()+e.toString()}chooseOperation(e){""!==this.currOperand&&(""!==this.prevOperand&&this.compute(),this.prevOperand=this.currOperand,this.currOperand="",this.operation=e)}sign(){this.currOperand="-"+this.currOperand.toString()}percent(){this.currOperand=parseFloat(this.currOperand)/100}compute(){let e;const t=parseFloat(this.prevOperand),r=parseFloat(this.currOperand);if(isNaN(t)||isNaN(r))return;switch(this.operation){case"+":e=t+r;break;case"-":e=t-r;break;case"x":e=t*r;break;case"รท":e=t/r;break;default:return}let n=e.toString();n.length>10&&(n=this.capResult(n)),this.prevOperand="",this.currOperand=n,this.operation=void 0,this.complete=!0}updateDisplay(){this.prevElement.innerText=this.prevOperand,this.currElement.innerText=this.currOperand}capResult(e){if(e.includes(".")){const t=e.indexOf("."),r=9-e.substring(0,t).length;return r<0?"Error...":(e=parseFloat(e).toFixed(r)).toString()}return"Error..."}}const calculator=new Calculator(prevElement,currElement);Array.from(numElements).forEach(e=>{e.addEventListener("click",()=>{calculator.appendNumber(e.innerText),calculator.updateDisplay()})}),Array.from(opsElements).forEach(e=>{e.addEventListener("click",()=>{calculator.chooseOperation(e.innerText),calculator.updateDisplay()})}),clearElement.addEventListener("click",()=>{calculator.clear(),calculator.updateDisplay()}),equalElement.addEventListener("click",()=>{calculator.compute(),calculator.updateDisplay()}),signElement.addEventListener("click",()=>{calculator.sign(),calculator.updateDisplay()}),percentElement.addEventListener("click",()=>{calculator.percent(),calculator.updateDisplay()});